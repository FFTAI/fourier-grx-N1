---
layout: default
title: 常用操作
nav_order: 5
has_toc: true
---

# 常用操作

* TOC
{:toc}

本文档介绍了使用 Fourier-GRX-N1 SDK 时的常用操作流程和注意事项。

## 固件安装和更新

Fourier-GRX-N1 SDK 安装文件请从 [固件更新](/docs/update) 下载。
下载完后，运行下面的指令完成安装过程：

```
# 安装 fourier-grx-xxx.deb 文件，安装完后系统中会提供 fourier-grx 程序工具
sudo dpkg -i fourier-grx-xxx.deb  # xxx 为具体版本号

# 安装 fourier-grx 完整内容
fourier-grx install
```

安装过程中，会要求输入机器人型号，请根据实际机器人型号进行配置，目前支持的型号如下：

| 机器人型号 | 机器人版本 | 测试机型 | [运行模式](/docs/usage#运行模式选择) | 适配的机器人型号 |
|-------|-------|------|----------------------------|----------|
| N1    | 无     | 否    | 开发者模式                      | N1       |

如若配置错误，可运行 `fourier-grx config` 进行重新配置。当前的配置信息可以通过 `fourier-grx list` 查看。

## 关节零位校准

### 启动前检查

1. **硬件检查**
    - ✅ 机器人电源已接通
    - ✅ 手柄正确连接
    - ✅ 网络连接正常
    - ✅ 插销已插入机器人关节定位孔

2. **软件准备**
    - ✅ SDK 已正确安装

### 启动程序

```bash
# 启动 Fourier-GRX 程序
fourier-grx start
```

### 校准流程

1. **操作步骤**
    - 使用手柄 L1 键选择 **校准任务**
    - 使用手柄 L2 键确认执行
    - 观察终端输出信息

校准任务对照表

| 机器人型号 | 校准任务          | 任务编号 | 说明      |
|-------|---------------|------|---------|
| N1    | TASK_SET_HOME | 999  | 全关节零位校准 |

2. **校准验证**
    - 成功标志
        - 终端显示 **全零数组**
        - 所有关节位置正确
    - 失败情况
        - 数组中出现大于 1 的值（意味着超过 1° 的关节偏差值）
        - 关节位置异常

3. **退出程序**

```bash
# 按两次 Ctrl+C 退出
⌨️ ctrl + c (×2)
```

### ⚠️ 重要注意事项

1. **插销管理**
    - 校准完成后必须拔出所有插销
    - 操作前检查插销是否完全移除
    - 如发现遗留插销，需重新校准

2. **安全预防**
    - 校准过程中保持安全距离
    - 确保紧急停止按钮可及
    - 观察机器人异常行为

3. **故障处理**
    - 校准失败时重新执行流程
    - 多次失败请联系技术支持
    - 记录错误信息以便分析

## 运行模式选择

在安装 `fourier-grx` 或是重新配置 `fourier-grx` 时，可以选择不同的运行模式。下面是一些相关指令：

- `fourier-grx list`：列出当前的配置参数，其中包括运行模式
- `fourier-grx install`：安装程序软件，安装过程中会提示选择运行模式
- `fourier-grx config`：重新配置启动参数

运行模式清单如下：

- ✅ 表示可用
- ❌ 表示不可用
- ⚠️ 表示尚未发布，功能不完整

| 编号 | 运行模式   | 配置值           | 说明                                     | 终端用户 | 开发用户 |
|----|--------|---------------|----------------------------------------|------|------|
| 1  | 发布模式   | release       | 适用于机器人出厂使用，默认使用 **掌机** 进行机器人控制         | ✅    | ❌    |
| 2  | 调试模式   | debug         | 适用于开发者调试使用，默认使用 **手柄** 进行机器人控制         | ❌    | ✅    |
| 3  | 遥操作模式  | teleoperation | 适用于开发者调试使用，默认使用 **Vision Pro** 进行机器人控制 | ❌    | ⚠️   |
| A  | 开发者模式  | sdk           | 适用于开发者使用 **SDK** 开发库调试使用               | ❌    | ✅    |
| B  | 离线调试模式 | offline       | 适用于 **离线** 调试使用，仅供内部测试使用               | ❌    | ❌    |

### 调试模式

调试模式下，机器人主要通过 **手柄**🎮 调用内部算法完成运动功能任务。
任务的切换使用手柄的 `L1`、`L2`、`R1`、`R2` 组合实现。
任务当前选中和确认的状态会在终端打印出来，如需查看，需通过终端窗口启动程序。

- `L1` 用于任务切换选择，`L2` 用于任务确认执行
- `R1` 用于模块切换选择，`R2` 用于模块确认执行

> **说明**：
>
> 关于任务和模块的具体描述，可以参考 [参考指南 User 接口](/docs/reference/user) 中的相关说明。

目前 Fourier N1 在调试模式下，可通过手柄调用的内部主要功能包括：

| 功能名称       | 任务编号 | 是否包含模块       | 说明                                                | 手柄快捷键              |
|------------|------|--------------|---------------------------------------------------|--------------------|
| 执行器失能（软急停） | 36   | 否            | 机器人全身执行器失能任务                                      | Logo<br/>(XBOX 键位) |
| 设置零位       | 999  | 否            | 全关节零位校准任务                                         |                    |
| 准备姿态       | 960  | 否            | 准备姿态任务                                            | A<br/>(XBOX 键位)    |
| 行走功能       | 965  | 是、包含多个上肢固定动作 | 站立、行走自然切换任务                                       | Y<br/>(XBOX 键位)    |
| 跑步功能       | 966  | 是、包含多个上肢固定动作 | 站立、行走、跑步自然切换任务                                    | B<br/>(XBOX 键位)    |
| 下蹲功能       | 3601 | 否            | 下蹲任务，会执行一次蹲下，再蹲起的动作。<br/>⚠️请在平地使用，并确保周围人员安全。      |                    |
| 正面爬起       | 3602 | 否            | 正面爬起任务，请确保机器人趴在地面正面朝下时使用。<br/>⚠️请在平地使用，并确保周围人员安全。 |                    |
| 单脚站立       | 3603 | 否            | 单脚站立任务，循环播放两次左右脚单脚站立功能。<br/>⚠️请在平地使用，并确保周围人员安全。   |                    |

> **说明**：
>
> 表格中未列出功能，可能仍处于开发中，或部份已废弃使用，或不建议通过手柄操作启用。
> 因此，建议开发者在使用手柄进行机器人操作时，谨慎选择任务执行。

### 开发者模式

开发者模式下，用户可以参考开源开发接口进行二次开发，
具体的开发接口和示例程序可以参考：

- 开发接口：[参考指南](/docs/reference)
- 示例程序：[Wiki-GRx-Deploy](https://github.com/FFTAI/Wiki-GRx-Deploy)

## 程序开机自启动

fourier-grx 提供了程序开机自启动的配置功能，可以通过以下指令进行配置：

```bash
fourier-grx enable_service  # 开启程序开机自启动
fourier-grx disable_service # 关闭程序开机自启动
```

如果机器人已经配置为用手柄进行遥控操作。
开启开机自启动后，请确保机器人手柄在开机前已连接到主控电脑的 USB 端口，并处于唤醒状态。